

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Initial setup for instructors &mdash; Numeric course 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/language_data.js"></script>
        <script src="../../../../_static/togglebutton.js"></script>
        <script >var togglebuttonSelector = '.toggle, .tag_hide_input div.cell_input, .tag_hide_output div.cell_output, .tag_hide_cell.cell';</script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/togglebutton.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/mystnb.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> Numeric course
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../course_bootstrap.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../ugradsyllabus20.html">Undergrad Syllabus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../gradsyllabus20.html">Grad Syllabus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../schedule20.html">Detailed Schedule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../texts.html">Optional texts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../notebook_toc.html">Course/lab descriptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../week_notes.html">Weekly notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../assignments.html">Weekly assignments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../quizzes.html">Quizzes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../rubrics.html">Rubrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../solutions.html">Solutions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Numeric course</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
      <li>Initial setup for instructors</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../../_sources/jupyter_execute/jupyter_execute/doc_notebooks/course_bootstrap/installing_jupytext.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="initial-setup-for-instructors">
<h1>Initial setup for instructors<a class="headerlink" href="#initial-setup-for-instructors" title="Permalink to this headline">¶</a></h1>
<div class="section" id="general-workflow">
<h2>General workflow<a class="headerlink" href="#general-workflow" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Always edit py files, treat the ipynb files as read only output storage</p></li>
<li><p>If you  forget, you can sync with: <code class="docutils literal notranslate"><span class="pre">jupytext</span> <span class="pre">--sync</span> <span class="pre">thenotebook.py</span></code></p></li>
<li><p>or sync and execute: <code class="docutils literal notranslate"><span class="pre">jupytext</span> <span class="pre">--sync</span> <span class="pre">--execute</span> <span class="pre">thenotebook.py</span></code></p></li>
</ul>
<p>To get familiar with how jupytext works, it would be good
to spend some time at https://jupytext.readthedocs.io/en/latest/?badge=latest</p>
<p>The notes below show how to bootstrap a repository with notebooks only committed
as python files.  That means that the first time through, we need to convert and
execute the ipynb versions.  Subsequently, jupyter will handle this through
the modified jupyter_notebook_config.py described below.</p>
</div>
<div class="section" id="installation">
<h2>installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p>Install miniconda if you don’t have it – note that our environment
will be 100% conda-forge, so you don’t want to use a large existing
anaconda installation to create the numeric environment.</p></li>
<li><p>clone the repo:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">phaustin</span><span class="o">/</span><span class="n">numeric</span>
<span class="n">cd</span> <span class="n">numeric</span>
</pre></div>
</div>
<ol class="simple">
<li><p>cd to the <code class="docutils literal notranslate"><span class="pre">course_utils</span></code> folder and create and activate the numeric environment</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">course_utils</span>
<span class="n">conda</span> <span class="n">env</span> <span class="n">create</span> <span class="o">-</span><span class="n">f</span> <span class="n">numeric</span><span class="o">.</span><span class="n">yml</span>
<span class="n">conda</span> <span class="n">activate</span> <span class="n">numeric</span>
</pre></div>
</div>
<ol class="simple">
<li><p>Make sure you have a jupyter config folder</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jupyter</span> <span class="n">notebook</span> <span class="o">--</span><span class="n">generate</span><span class="o">-</span><span class="n">config</span>
</pre></div>
</div>
<p>This should put a <code class="docutils literal notranslate"><span class="pre">jupyter_notebook_config.py</span></code> file in your <code class="docutils literal notranslate"><span class="pre">~/.jupyter</span></code> folder</p>
<ol class="simple">
<li><p>Replace the config with the one in conda_utils</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="n">conda_utils</span><span class="o">/</span><span class="n">jupyter_notebook_config</span><span class="o">.</span><span class="n">py</span> <span class="o">~/.</span><span class="n">jupyter</span><span class="o">/.</span>
</pre></div>
</div>
</div>
<div class="section" id="building-the-notebooks">
<h2>Building the notebooks<a class="headerlink" href="#building-the-notebooks" title="Permalink to this headline">¶</a></h2>
<p>We need to track three different flavors of notebook:</p>
<p>a) Student versions
b) Notebooks with solutions
c) Documentation notebooks for website</p>
<p>At the moment there are two sets, the student notebooks are in
<code class="docutils literal notranslate"><span class="pre">numerics/notebooks</span></code> and the documentation notebooks
are in <code class="docutils literal notranslate"><span class="pre">numeric/docs/docs_notebooks</span></code></p>
<p>To build from scratch, we need to convert the py files to ipynb files.</p>
<p>To do this:</p>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">numeric</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">scripts/find_notebooks.py</span> <span class="pre">notebooks</span> <span class="pre">notebook_filelist.json</span> <span class="pre">--initial</span></code></p></li>
</ol>
<p>This should create an ipynb file for every py file and a new json
file calle <code class="docutils literal notranslate"><span class="pre">notebook_filelist.json</span></code>.  We need to execute
these, at this point we can suppress all errors:</p>
<p><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">scripts/jup_build.py</span> <span class="pre">exec-noerrors-nb</span> <span class="pre">notebook_filelist.json</span></code></p>
<p>Repeat this for the docs notebooks:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">scripts</span><span class="o">/</span><span class="n">find_notebooks</span><span class="o">.</span><span class="n">py</span> <span class="n">docs</span><span class="o">/</span><span class="n">doc_notebooks</span> <span class="n">notebook_docs_filelist</span><span class="o">.</span><span class="n">json</span> <span class="o">--</span><span class="n">initial</span>
<span class="n">python</span> <span class="n">scripts</span><span class="o">/</span><span class="n">jup_build</span><span class="o">.</span><span class="n">py</span> <span class="n">exec</span><span class="o">-</span><span class="n">noerrors</span><span class="o">-</span><span class="n">nb</span> <span class="n">notebook_docs_filelist</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
</div>
<div class="section" id="making-the-course-website">
<h2>Making the course website<a class="headerlink" href="#making-the-course-website" title="Permalink to this headline">¶</a></h2>
<p>The notebooks (ipynb) and any restructured text (rst) and markdown (md) files are assembled
into a website using <a class="reference external" href="https://nbsphinx.readthedocs.io/en/0.5.0/">nbsphinx</a>.  To build and
deploy with github-pages:</p>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">numeric/docs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">./build_website.sh</span></code></p></li>
</ol>
<p>and push to github</p>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">numeric/docs</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">./push_pages.sh</span></code></p></li>
</ol>
</div>
<div class="section" id="push-the-student-notebooks-to-their-download-repo">
<h2>Push the student notebooks to their download repo<a class="headerlink" href="#push-the-student-notebooks-to-their-download-repo" title="Permalink to this headline">¶</a></h2>
<p>We have a separate repo to maintain the notebooks and libraries that the students will
download:  https://github.com/phaustin/numeric_students</p>
<p>This repository is a mirror of everything that is in our <a class="reference external" href="https://github.com/phaustin/numeric/tree/master/students">students folder</a>.  My workflow for deploying
to this folder:</p>
<ol>
<li><p>add a no-passphrase public key to the numeric_students repository (mine is named new_pha_git)</p></li>
<li><p>I put the following entry into my .ssh/config:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> Host phaustin
      HostName github.com
      User git
      IdentityFile ~/.ssh/new_pha_git
      IdentitiesOnly yes
      
</pre></div>
</div>
</li>
<li><p>Add the following remote to the main numeric repository</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">add</span> <span class="n">remote</span> <span class="n">students</span> <span class="n">phaustin</span><span class="p">:</span><span class="n">phaustin</span><span class="o">/</span><span class="n">numeric_students</span>
</pre></div>
</div>
<ol class="simple">
<li><p>Now you can use ghp-import to push the students folder to that remote using <a class="reference external" href="https://github.com/phaustin/numeric/blob/master/scripts/push_students.sh">push_students.sh</a></p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">scripts</span><span class="o">/</span><span class="n">push_students</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>Note that I’ve removed the master branch from the repo and made “downloads” the default branch
so we don’t get confused.</p>
<p><strong>Important point – you can commit new notebooks to the student folder as part of a numeric branch, but push_students.sh makes a separate commit of every file in the folder and completely overwrites the remote
branch for every push.  So treat everything on the remote branch as ephemeral.</strong></p>
</div>
</div>
<div class="section" id="student-installs">
<h1>Student installs<a class="headerlink" href="#student-installs" title="Permalink to this headline">¶</a></h1>
<p><strong>If you already have conda or anaconda installed, skip to <code class="docutils literal notranslate"><span class="pre">Git</span> <span class="pre">install</span></code> below</strong></p>
<div class="section" id="for-macos-new-installs">
<h2>For MacOS new installs<a class="headerlink" href="#for-macos-new-installs" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p>Download miniconda from  https://docs.conda.io/en/latest/miniconda.html  – choose the <code class="docutils literal notranslate"><span class="pre">Miniconda3</span> <span class="pre">MacOSX</span> <span class="pre">64-bit</span> <span class="pre">pkg</span></code> file from the menu and run it, agreeing to the licences and accepting all defaults. You should install for “just me”</p></li>
<li><p>To test your installation, open a fresh terminal window and at the prompt type <code class="docutils literal notranslate"><span class="pre">which</span> <span class="pre">conda</span></code>.  You should see something resembling the following output, with your username instead of <code class="docutils literal notranslate"><span class="pre">phil</span></code>:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">which</span> <span class="n">conda</span>
<span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">phil</span><span class="o">/</span><span class="n">opt</span><span class="o">/</span><span class="n">miniconda3</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">conda</span>
</pre></div>
</div>
</div>
<div class="section" id="for-windows-new-installs">
<h2>For Windows new installs<a class="headerlink" href="#for-windows-new-installs" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p>Download miniconda from  https://docs.conda.io/en/latest/miniconda.html  – choose the <code class="docutils literal notranslate"><span class="pre">Miniconda3</span> <span class="pre">Windows</span> <span class="pre">64-bit</span></code>. download from the menu and run it, agreeing to the licences and accepting all defaults.</p></li>
</ol>
<p>The installer should suggest installing in a path that looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C</span><span class="p">:</span>\<span class="n">Users</span>\<span class="n">phil</span>\<span class="n">Miniconda3</span>
</pre></div>
</div>
<ol class="simple">
<li><p>Once the install completes hit the windows key and start typing <code class="docutils literal notranslate"><span class="pre">anaconda</span></code>.  You should see a shortcut that looks like:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Anaconda</span> <span class="n">Powershell</span> <span class="n">Prompt</span>
<span class="p">(</span><span class="n">Miniconda3</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Note that Windows comes with two different terminals <code class="docutils literal notranslate"><span class="pre">cmd</span></code> (old) and <code class="docutils literal notranslate"><span class="pre">powershell</span></code> (new).  Always select the powershell version of the anaconda terminal</strong></p>
<ol class="simple">
<li><p>Select the short cut.  If the install was successful you should see something like:</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">base</span><span class="p">)</span> <span class="p">(</span><span class="n">Miniconda3</span><span class="p">):</span><span class="n">Users</span><span class="o">/</span><span class="n">phil</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>with your username substituted for phil.</p>
</div>
<div class="section" id="git-install">
<h2>Git install<a class="headerlink" href="#git-install" title="Permalink to this headline">¶</a></h2>
<p>Inside your powershell or MacOs terminal, install git using conda:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="n">git</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-up-the-course-repository">
<h2>Setting up the course repository<a class="headerlink" href="#setting-up-the-course-repository" title="Permalink to this headline">¶</a></h2>
<p>In the terminal, change directories to your home directory (called <code class="docutils literal notranslate"><span class="pre">~</span></code> for short) and make a new directory
called <code class="docutils literal notranslate"><span class="pre">repos</span></code> to hold the course notebook repository.  Change into <code class="docutils literal notranslate"><span class="pre">repos</span></code> and clone the course:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~</span>
<span class="n">mkdir</span> <span class="n">repos</span>
<span class="n">cd</span> <span class="n">repos</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">phaustin</span><span class="o">/</span><span class="n">numeric_students</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
</div>
<div class="section" id="creating-the-course-environment">
<h2>Creating the course environment<a class="headerlink" href="#creating-the-course-environment" title="Permalink to this headline">¶</a></h2>
<p>In the terminal, execute the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">numeric_students</span><span class="o">/</span><span class="n">utils</span>
<span class="n">conda</span> <span class="n">env</span> <span class="n">create</span> <span class="o">-</span><span class="n">f</span> <span class="n">numeric</span><span class="o">.</span><span class="n">yml</span>
<span class="n">conda</span> <span class="n">activate</span> <span class="n">numeric</span>
</pre></div>
</div>
</div>
<div class="section" id="opening-the-notebook-folder">
<h2>Opening the notebook folder<a class="headerlink" href="#opening-the-notebook-folder" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">~/</span><span class="n">repos</span><span class="o">/</span><span class="n">numeric_students</span><span class="o">/</span><span class="n">numeric_notebooks</span>
<span class="n">jupyter</span> <span class="n">notebook</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Numeric project

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>